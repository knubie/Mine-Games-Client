// Generated by CoffeeScript 1.3.2
(function() {
  var server_url;

  server_url = "http://localhost:3000";

  $(function() {
    if ($.cookie('token') != null) {
      console.log('hi');
      $.mobile.changePage("#lobby", {
        transition: "none"
      });
    }
    $("#facebook-auth").click(function() {
      return window.plugins.childBrowser.showWebPage("" + server_url + "/auth/facebook?display=touch");
    });
    $('.logout').click(function() {
      $.cookie('token', null);
      return $.mobile.changePage("#home", {
        transition: "none"
      });
    });
    return $('#create_match').click(function() {
      return $.ajax({
        type: 'GET',
        url: "" + server_url + "/friends.json",
        dataType: 'json',
        success: function(data) {
          var friend, list, _i, _len, _ref, _results;
          console.log(data);
          console.log('victory is mine!');
          list = function(friend, type) {
            console.log(friend.id);
            console.log(friend.name);
            return $("." + type).append("<label><input id='users_' name='users[]' type='checkbox' value='" + friend.id + "'>" + friend.name + "</label>").trigger('create');
          };
          _ref = data.play_friends;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            friend = _ref[_i];
            _results.push(list(friend, 'play_friends'));
          }
          return _results;
        },
        error: function(xhr, txtstat, err) {
          return console.log(err);
        }
      });
    });
  });

}).call(this);
